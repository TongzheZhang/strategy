http://blog.sina.com.cn/s/blog_5008d72e0100q4i6.html
1. 
//固定幅度止损，在长期趋势跟踪系统中，对大多数市场来说，最佳ATR值在2.5至4.0间。 
m_slvalue = pSLnatrs * AvgTrueRange(pATRlen);
if marketposition >0 then 
	sell ("Long SL") next bar at (entryprice-m_slvalue) stop;
if marketposition <0 then 
	buytocover ("Short SL") next bar at (entryprice+m_slvalue) stop;
	
2.
吊灯止损法：我们常常强调一个好的离市在交易中的重要性，我们喜欢这么强调。我们把止损点放在离我们入市后的最高点或最高收盘价某一ATR处，随着高点越变越高，我们的止损点也逐渐上移，而不是下。
止损点放在自我们入市交易后的最高价减去3ATR处。
止损点放在自我们入市交易后的最高收盘价减去2.5ATR处。
value1 = currentbar;
N = AvgTrueRange(pATRlen);

if marketposition <> 0 then
    m_slvalue = HighestFC(close, currentbar - value1) ;
if marketposition >0 then begin
	sell ("Long SL") next bar at (m_slvalue-2.5*N) stop;
	end;
if marketposition <0 then begin
	buytocover ("Short SL") next bar at (m_slvalue+2.5*N) stop;
	end; 
3.
YoYo止损法：

该法非常类似于吊灯止损法，差别仅在于其ATR止损点总是盯牢上一个收盘价的，而不是盯牢最高价（或最高收盘价）。由于上一个收盘价不 断的变高或变底，止损点也跟着上移或下移（因为我们把它叫做YOYO止损法）。尽管两种止损法表面上很像，但其逻辑还是相当有区别的。YOYO止损法是典 型的波动性止损法，即用于辨别一个交易日内异常的不利的价格波动。这种异常波动往往是由于某一新闻事件，或是一种重要的技术性反转（是趋势结束的标志）。 这种逻辑使得YOYO止损法非常有效，我们很少因为这种止损触发的退出交易而后悔。
必须提醒你YOYO止损法绝不是我们唯一的亏损保护措施，因为如果价格是缓慢的向不利于我们仓位的方向移动，YOYO止损点也跟着一天天的往下移，永远也不会触发止损点，这在理论上是可能的。
if marketposition >0 then begin
	sell ("Long SL") next bar at (close[1]-m_slvalue) stop;
	end;
if marketposition <0 then begin
	buytocover ("Short SL") next bar at (close[1]+m_slvalue) stop;
	end; 

4.
